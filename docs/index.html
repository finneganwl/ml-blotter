<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>NU Blotter</title>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.7.1/css/bulma.min.css">
	<link href="https://fonts.googleapis.com/css?family=Play" rel="stylesheet">
	<link href="mystyles.css" rel="stylesheet">
	<script defer src="https://use.fontawesome.com/releases/v5.0.7/js/all.js"></script>
</head>
<body>
	<nav class="navbar is-transparent">
		<div class="navbar-brand">
			<a class="navbar-item is-size-3 has-text-primary" style="font-family: 'Play', sans-serif;" href="https://finneganwl.github.io/ml-blotter/">
				<!--<img src="https://bulma.io/images/bulma-logo.png" alt="Bulma: a modern CSS framework based on Flexbox" width="112" height="28">-->
				<b>NU BLOTTER</b>
			</a>
			<div class="navbar-burger burger" data-target="navbarExampleTransparentExample">
				<span></span>
				<span></span>
				<span></span>
			</div>
		</div>

		<div id="navbarExampleTransparentExample" class="navbar-menu">
			<div class="navbar-start">
				<a class="navbar-item" href="#abstract">
					Abstact
				</a>
				<a class="navbar-item" href="#data">
					The Data
				</a>
				<a class="navbar-item" href="#exploration">
					Data Exploration
				</a>
				<a class="navbar-item" href="#model">
					Model Selection
				</a>
				<a class="navbar-item" href="#evaluation">
					Evaluation
				</a>
				<a class="navbar-item" href="#insights">
					Insights
				</a>

			</div>

			<div class="navbar-end">
				<div class="navbar-item">
					<div class="field is-grouped">
						<p class="control">
							<a class="button is-primary" href="https://github.com/finneganwl/ml-blotter">
								<span class="icon">
									<i class="fab fa-github"></i>
								</span>
								<span>View source on GitHub</span>
							</a>
						</p>
					</div>
				</div>
			</div>
		</div>
	</nav>
	<div class="columns">
		<div class="column is-one-fifth">
		</div>
		<div class="column">
		</div>
		<div class="column is-one-fifth">
		</div>
	</div>

	<section class="section is-medium">
		<div class="container">
			
			<h1 class="title has-text-centered">
				The Scenario
			</h1>
			<p class="subtitle has-text-centered">
				The Northwestern Campus police receive a 911 call at <strong> 11:45am on a Friday night in October</strong> originating from an off-campus <strong>location South of Noyes Street and West of Sherman Avenue</strong>. Can a machine learning model help the officers predict the nature of the emergency even before they speak to anyone on the phone?
			</p>
		</section>

		<section class="section is-medium" id="abstract">
			<div class="container">
				<h1 class="title">
					Abstract
				</h1>
				<p class="subtitle">
					Machine Learning on the Northwestern Campus Police Blotter
				</p>

				<div class="content">
					<p>
						NU Blotter's task is to predict the incident type of Northwestern Campus blotter entries using the time and location of the incident. This simulates what a real-time system to classify 911 calls would have to do. This kind of system would be useful to the police officers because it could allow them to respond to 911 calls faster and with more specificity. In addition, this model can be used to better understand the patterns in police incidents around campus. In particular, better understanding of crimes commonly associated with students, such as alcohol law violations and noise complaints, could help improve relations between Northwestern students and Evanston residents. 
					</p>

					<div class="columns">
						<div class="column is-one-quarter">
						</div>
						<div class="column">
							<figure class="image is-marginless">
								<img src="img/time-sequence.gif" style="width: 100%; height: auto; margin-left: auto; margin-right: auto;">
							</figure>
							<p class="has-text-centered">
								<strong> Location of Incidents by Day of the Week</strong><br>
								Incidents of the same type tend to be clustered in location and time.
							</p>
						</div>
						<div class="column is-one-quarter">
						</div>
					</div>

					<p>
						NU Blotter uses the algorithm 1-nearest neighbor to classify incidents into two classes: Alcohol/Drugs/Noise and Other. The features it uses to predict these classes are month, day of the week, time, latitude, longitude, and whether the address is a dorm. Using these features, the model is able to predict whether the incident type is Alcohol/Drugs/Noise or not with 87.70% accuracy, although this metric is not necessarily ideal (see Model Selection). Using F1 score as a metric, 1-nearest neighbor strongly outperformed the baseline algorithms, as well as decision trees and logistic regression.
					</p>
				</div>
			</div>
		</section>

		<section class="section is-medium" id="data">
			<div class="container">
				<h1 class="title">
					The Data
				</h1>
				<p class="subtitle">
					18,475 incidents from the Northwestern Campus Police Blotter
				</p>

				<div class="content">
					<p>
						NU Blotter uses data scraped from the <a href="https://www.northwestern.edu/up/facts-and-figures/campus-crime/daily-blotter/evanston-campus-police-blotter.html">Northwestern Campus Police Blotter</a>. Its dataset contains 18,475 incidents from 2006 to 2018. The raw data for date, time, and address have to be preprocessed before machine learning algorithms can be applied to it. The features it derives are:
					</p>
					<ul>
						<li> Time of day (represented with <a href="https://ianlondon.github.io/blog/encoding-cyclical-features-24hour-time/">sine cosine encoding</a> to reflect the cyclic nature of time)</li>
						<li> Day of the Week (as {-1, 1} one-hot encodings)</li>
						<li> Month of the Year (as {-1, 1} one-hot encodings)</li>
						<li> Latitude and Longitude (geocoded from address and scaled to mean=0, standard deviation=1)</li>
						<li> Dorm (as {-1,1} for whether the address is a dorm)</li>
					</ul>
					<p>
						The incident type provided in each blotter entry is very specific, with 125 different types of incidents specified. I initially grouped these into 16 categories. I excluded all incidents of type "General/Other" from this initial 16-category breakdown because this category seemed to included a mix of crimes from all the other categories, as opposed to defining a separate type of crime. It was only adding noise to the other categories. But I soon realized that I would need more data to achieve success predicting 16 categories. Instead, I regrouped these categories into 2 classes:
					</p>
					<ul>
						<li>Crimes associated with students (Alcohol/Drugs and Noise/Disturbances)</li>
						<li>Everything else</li>
					</ul>
					<p>
						The data also has to be cleaned to fix misspellings and to exclude locations outside of Evanston. After removing these data points and all data with incidents categorized as "General/Other", I had 12,441 records left. I saved 20% of these records as validation data and used the remaining 80% to select the machine learning model.
					</p>

				</div>
			</div>
		</section>

		<section>
			<div class="container" id="exploration">
				<h1 class="title">
					Data Exploration
				</h1>
				<p class="subtitle">
					Discovering Trends
				</p>
				<div class="content">
					<div class="columns">
						<div class="column is-one-quarter">
						</div>
						<div class="column">
							<figure class="image is-marginless">
								<img src="img/month.png" style="width: 100%; height: auto; margin-left: auto; margin-right: auto;">
							</figure>
							<p class="has-text-centered" style="margin-bottom: 4em;">
								<strong> Number of Incidents Reported vs. Month</strong><br>
								Both categories of crime seem to fluctuate with the same pattern, peaking in the middle of each of the three main academic quarters and falling off in the months students are on break.
							</p>
						</div>
						<div class="column is-one-quarter">
						</div>
					</div>

					<div class="columns">
						<div class="column is-one-quarter">
						</div>
						<div class="column">
							<figure class="image is-marginless">
								<img src="img/time.png" style="width: 100%; height: auto; margin-left: auto; margin-right: auto;">
							</figure>
							<p class="has-text-centered" style="margin-bottom: 4em;">
								<strong> Number of Incidents Reported vs. Time of Day</strong><br>
								Almost all alcohol/drug/noise related incidents occur late at night. Hardly any crimes occur in the early morning.
							</p>
						</div>
						<div class="column is-one-quarter">
						</div>
					</div>

					<div class="columns">
						<div class="column is-one-quarter">
						</div>
						<div class="column">
							<figure class="image is-marginless">
								<img src="img/dayofweek.png" style="width: 100%; height: auto; margin-left: auto; margin-right: auto;">
							</figure>
							<p class="has-text-centered" style="margin-bottom: 4em;">
								<strong> Number of Incidents Reported vs. Day of the Week</strong><br>
								More alcohol/drug/noise related incidents occur on the weekends. The effect is especially strong on Saturdays.
							</p>
						</div>
						<div class="column is-one-quarter">
						</div>
					</div>

					<div class="columns">
						<div class="column is-one-quarter">
						</div>
						<div class="column">
							<figure class="image is-marginless">
								<img src="img/dorm.png" style="width: 100%; height: auto; margin-left: auto; margin-right: auto;">
							</figure>
							<p class="has-text-centered" style="margin-bottom: 4em;">
								<strong> Fraction of Incidents Reported in Dorms vs. Other Addresses </strong><br>
								Alcohol/Drug/Noise related incidents make up a higher fraction of the incidents reported at dorms than other Evanston addresses.
							</p>
						</div>
						<div class="column is-one-quarter">
						</div>
					</div>

					<div class="columns">
						<div class="column is-one-quarter">
						</div>
						<div class="column">
							<figure class="image is-marginless">
								<img src="img/location.png" style="width: 100%; height: auto; margin-left: auto; margin-right: auto;">
							</figure>
							<p class="has-text-centered">
								<strong> Number of Incidents Reported by Location</strong><br>
								Alcohol/Drug/Noise related incidents are mainly clustered in a few areas of Evanston.
							</p>
						</div>
						<div class="column is-one-quarter">
						</div>
					</div>

				</div>
			</div>
		</section>

		<section class="section is-medium" id="model">
			<div class="container">
				<h1 class="title">
					Model Selection
				</h1>
				<p class="subtitle">
					Comparing Scikit-Learn models
				</p>

				<div class="content">
					<p>
						To train a machine learning model on this data, I used the Scikit-Learn implementations of a few different machine learning models. I used 10-fold cross validation to compare their performance. I experimented with k-nearest neighbors, decision trees, and logistic regression. The data had high class imbalance, with only about 15% of records corresponding to alcohol/drugs/noise violations, and the remaining 85% belonging to the other classification. This meant that accuracy is not the ideal metric for comparing models, as a model that always guessed non-alcohol/drugs/noise could get 85% accuracy. Instead, I used the F1 score of each model to evaluate its performance. This gave an equal weighting to precision and recall. A summary of a few of the model's cross validation metrics are reported below, where "baseline" is zeroR for accuracy and random for precision, recall, and F1 score. 
					</p>
					<table class="table">
						<thead>
							<tr>
								<th>Algorithm</th>
								<th>Accuracy</th>
								<th>Precision</th>
								<th>Recall</th>
								<th>F1 Score</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<th>1-Nearest Neighbor</th>
								<td>87.18%</td>
								<td>56.30%</td>
								<td>58.43%</td>
								<td>57.25%</td>
							</tr>
							<tr>
								<th>Decision Tree</th>
								<td>87.05%</td>
								<td>55.74%</td>
								<td>58.30%</td>
								<td>56.85%</td>
							</tr>
							<tr>
								<th>2-Nearest Neighbors</th>
								<td>87.83%</td>
								<td>65.90%</td>
								<td>36.25%</td>
								<td>46.67%</td>
							</tr>
							<tr>
								<th>Logistic Regression</th>
								<td>86.66%</td>
								<td>60.53%</td>
								<td>27.48%</td>
								<td>37.67%</td>
							</tr>
							<tr>
								<th>Baseline</th>
								<td>85.29%</td>
								<td>15.03%</td>
								<td>15.44%</td>
								<td>15.23%</td>
							</tr>
						</tbody>
					</table>
					<p>
						K-nearest neighbors with k = 1 gave the best performance using F1 as the metric, and significantly outperformed the baseline random classifier. This is the model I chose to deploy.
					</p>
				</div>
			</div>
		</section>

		<section class="section is-medium" id="evaluation">
			<div class="container">
				<h1 class="title">
					Evaluation
				</h1>
				<p class="subtitle">
					Measuring Performance on the Validation Set
				</p>

				<div class="content">
					<p>
						When evaluating the 1-nearest neighbor algorithm on the validation data, the model had 87.70% accuracy (compared to zeroR baseline of 84.63%). Although this result is significant with p = 0.0002 for a Fisher exact test, even more significant results can be found by examining the other metrics. 
					</p>
					<table class="table">
						<thead>
							<tr>
								<th>Algorithm</th>
								<th>Accuracy</th>
								<th>Precision</th>
								<th>Recall</th>
								<th>F1 Score</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<th>1-Nearest Neighbor</th>
								<td>87.70%</td>
								<td>59.31%</td>
								<td>63.56%</td>
								<td>61.36%</td>
							</tr>
							<tr>
								<th>Baseline</th>
								<td>84.63%</td>
								<td>16.39%</td>
								<td>15.96%</td>
								<td>16.17%</td>
							</tr>
						</tbody>
					</table>
					<p>
						The model achieved precision, recall, and F1 score which significantly outscored the baseline algorithms. This means that this model does much better than random guessing, and could provide officers with valuable information when predicting crime types.
					</p>
				</div>
			</div>
		</section>

		<section class="section is-medium" id="insights">
			<div class="container">
				<h1 class="title">
					Insights
				</h1>
				<p class="subtitle">
					Conclusions, What's Next
				</p>

				<div class="content">
					<p>
						NU Blotter can be used to predict crime type of Northwestern Campus Police incidents based on the time and location of the incident. This could be useful to officers because it would allow them to respond to 911 calls faster, and could be used to plan patrols for future events. An interesting area of future work would be attempting to achieve similar levels of accuracy using small decision trees. This would make the model easier to interpret, perhaps giving the officers simple rules like "If it's after 9pm and you're North of Foster Street, the liklihood of alcohol related incidents increases."
					</p>
				</div>
			</div>
		</section>

		<section class="section is-medium">
			<footer class="footer">
				<div class="container">
					<div class="content has-text-centered">
						<p>
							<strong>NU Blotter</strong> is a project by Will Finnegan.
						</p>
						<p>
							<a href="mailto:williamfinnegan2019@u.northwestern.edu">williamfinnegan2019@u.northwestern.edu</a>
						</p>
						<p>
							This project was completed for EECS 349: Machine Learning at Northwestern University, taught by Prof. Doug Downey.
						</p>
					</div>
				</div>
			</footer>
		</section>


	</body>
	</html>
